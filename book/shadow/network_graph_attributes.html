<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Graph Configuration - Shadow Simulator</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="../favicon.svg">
        
        
        <link rel="shortcut icon" href="../favicon.png">
        
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        
        <link rel="stylesheet" href="../css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="../fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../index.html">Introduction</a></li><li class="chapter-item expanded affix "><li class="part-title">Shadow Network Simulator</li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.</strong> Installation and Setup</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../shadow/supported_platforms.html"><strong aria-hidden="true">1.1.</strong> Supported Platforms</a></li><li class="chapter-item expanded "><a href="../shadow/install_dependencies.html"><strong aria-hidden="true">1.2.</strong> Dependencies</a></li><li class="chapter-item expanded "><a href="../shadow/install_shadow.html"><strong aria-hidden="true">1.3.</strong> Shadow</a></li><li class="chapter-item expanded "><a href="../shadow/system_configuration.html"><strong aria-hidden="true">1.4.</strong> System Configuration</a></li><li class="chapter-item expanded "><a href="../shadow/install_shadow_with_docker.html"><strong aria-hidden="true">1.5.</strong> (Experimental) Shadow with Docker</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.</strong> The Shadow Simulator</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../shadow/getting_started.html"><strong aria-hidden="true">2.1.</strong> Getting Started</a></li><li class="chapter-item expanded "><a href="../shadow/parsing_statistics.html"><strong aria-hidden="true">2.2.</strong> Parsing Statistics</a></li><li class="chapter-item expanded "><a href="../shadow/log_format.html"><strong aria-hidden="true">2.3.</strong> Log Format</a></li><li class="chapter-item expanded "><a href="../shadow/design_overview.html"><strong aria-hidden="true">2.4.</strong> Design Overview</a></li><li class="chapter-item expanded "><a href="../shadow/notes_and_faq.html"><strong aria-hidden="true">2.5.</strong> Notes and FAQs</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.</strong> Simulation Customization</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../shadow/shadow_config.html"><strong aria-hidden="true">3.1.</strong> Shadow Configuration</a></li><li class="chapter-item expanded "><a href="../shadow/network_config.html"><strong aria-hidden="true">3.2.</strong> Network Configuration</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../shadow/network_graph_attributes.html" class="active"><strong aria-hidden="true">3.2.1.</strong> Graph Configuration</a></li></ol></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.</strong> Developer Guides</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../shadow/developer_guide.html"><strong aria-hidden="true">4.1.</strong> Debugging and Profiling</a></li><li class="chapter-item expanded "><a href="../shadow/ci.html"><strong aria-hidden="true">4.2.</strong> Continous Integration Tests</a></li><li class="chapter-item expanded "><a href="../shadow/using_recompiled_libc.html"><strong aria-hidden="true">4.3.</strong> Using a Recompiled Libc</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.</strong> The Shadow Project</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../shadow/contributing.html"><strong aria-hidden="true">5.1.</strong> Contributing</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../shadow/coding_style.html"><strong aria-hidden="true">5.1.1.</strong> Coding Style</a></li><li class="chapter-item expanded "><a href="../shadow/pull_requests.html"><strong aria-hidden="true">5.1.2.</strong> Pull Requests</a></li></ol></li><li class="chapter-item expanded "><a href="../shadow/maintainer_playbook.html"><strong aria-hidden="true">5.2.</strong> Maintainer Playbook</a></li><li class="chapter-item expanded "><a href="../shadow/nsf_sponsorship.html"><strong aria-hidden="true">5.3.</strong> NSF Sponsorship</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">TGen Traffic Generator</li><li class="chapter-item expanded "><a href="../tgen/index.html"><strong aria-hidden="true">6.</strong> About</a></li><li class="chapter-item expanded "><a href="../tgen/TGen-Markov-Models.html"><strong aria-hidden="true">7.</strong> Markov Models</a></li><li class="chapter-item expanded "><a href="../tgen/TGen-Options.html"><strong aria-hidden="true">8.</strong> Options</a></li><li class="chapter-item expanded "><a href="../tgen/TGen-Overview.html"><strong aria-hidden="true">9.</strong> Overview</a></li><li class="chapter-item expanded "><a href="../tgen/Tools-JSON-Format.html"><strong aria-hidden="true">10.</strong> JSON Format</a></li><li class="chapter-item expanded affix "><li class="part-title">Tor Network Simulation</li><li class="chapter-item expanded "><a href="../tornettools/index.html"><strong aria-hidden="true">11.</strong> TorNetTools</a></li><li class="chapter-item expanded "><a href="../oniontrace/index.html"><strong aria-hidden="true">12.</strong> OnionTrace</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">Shadow Simulator</h1>

                    <div class="right-buttons">
                        
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                        <a href="https://github.com/shadow" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        
                        

                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h3 id="network-graph-attributes"><a class="header" href="#network-graph-attributes">Network Graph Attributes</a></h3>
<p>The <a href="network_config.html">network graph overview</a> provides a general summary of Shadow's use of a network graph to abstractly model network position and to connect virtual hosts in a network topology while enforcing network characteristics on paths between hosts. This page describes the specific attributes that can be configured in the network graph, and the effect that each attribute has on the simulation.</p>
<h3 id="example-graph"><a class="header" href="#example-graph">Example Graph</a></h3>
<p>Below is an example of a simple network graph in the Shadow-supported GML format (note that GML calls <em>vertices</em> as <em>nodes</em>).</p>
<pre><code class="language-gml">graph [
  directed 0
  node [
    id 0
    label &quot;node at 1.2.3.4&quot;
    country_code &quot;US&quot;
    city_code &quot;Portland&quot;
    ip_address &quot;1.2.3.4&quot;
    bandwidth_down &quot;100 Mbit&quot;
    bandwidth_up &quot;100 Mbit&quot;
  ]
  edge [
    source 0
    target 0
    label &quot;path from 1.2.3.4 to 1.2.3.4&quot;
    latency 10.0
    jitter 0.0
    packet_loss 0.0
  ]
]
</code></pre>
<h3 id="configurable-attributes"><a class="header" href="#configurable-attributes">Configurable Attributes</a></h3>
<ul>
<li><a href="#graphdirected"><code>graph.directed</code></a></li>
<li><a href="#vertexid"><code>vertex.id</code></a></li>
<li><a href="#vertexlabel"><code>vertex.label</code></a></li>
<li><a href="#vertexcountry_code"><code>vertex.country_code</code></a></li>
<li><a href="#vertexcity_code"><code>vertex.city_code</code></a></li>
<li><a href="#vertexip_address"><code>vertex.ip_address</code></a></li>
<li><a href="#vertexbandwidth_down"><code>vertex.bandwidth_down</code></a></li>
<li><a href="#vertexbandwidth_up"><code>vertex.bandwidth_up</code></a></li>
<li><a href="#edgesource"><code>edge.source</code></a></li>
<li><a href="#edgetarget"><code>edge.target</code></a></li>
<li><a href="#edgelabel"><code>edge.label</code></a></li>
<li><a href="#edgelatency"><code>edge.latency</code></a></li>
<li><a href="#edgejitter"><code>edge.jitter</code></a></li>
<li><a href="#edgepacket_loss"><code>edge.packet_loss</code></a></li>
</ul>
<h4 id="graphdirected"><a class="header" href="#graphdirected"><code>graph.directed</code></a></h4>
<p>Required: False<br />
Default: <code>0</code><br />
Type: Integer</p>
<p>Specifies the symmetry of the edges in the graph. If set to <code>0</code> (the default), the graph is an <a href="https://en.wikipedia.org/wiki/Graph_(discrete_mathematics)">undirected graph</a>: an edge between vertex <code>u</code> and vertex <code>v</code> is symmetric and can be used to construct a path both from <code>u</code> to <code>v</code> and from <code>v</code> to <code>u</code>. If set to <code>1</code>, the graph is a <a href="https://en.wikipedia.org/wiki/Directed_graph">directed graph</a>: an edge from vertex <code>u</code> to vertex <code>v</code> is assymmetric and can only be used to construct a path from <code>u</code> to <code>v</code> (a separate edge from <code>v</code> to <code>u</code> must be specified to compose a path in the reverse direction).</p>
<h4 id="vertexid"><a class="header" href="#vertexid"><code>vertex.id</code></a></h4>
<p>Required: True<br />
Type: Integer</p>
<p>A unique integer identifier for a given vertex.</p>
<h4 id="vertexlabel"><a class="header" href="#vertexlabel"><code>vertex.label</code></a></h4>
<p>Required: False<br />
Default: n/a<br />
Type: String</p>
<p>An optional, human-meaningful string description of the vertex. The string may be used in log messages printed by Shadow.</p>
<h4 id="vertexcountry_code"><a class="header" href="#vertexcountry_code"><code>vertex.country_code</code></a></h4>
<p>Required: False<br />
Default: n/a<br />
Type: String</p>
<p>A code for the country in which the node represented by this vertex is located. This code can be used to control the placement of hosts in the network: when attaching a specific host into the network, we ignore any vertex whose <code>country_code</code> does not match the host's <a href="shadow_config.html#host_defaultscountry_code_hint"><code>country_code_hint</code> host configuration value</a> (if one is configured).</p>
<h4 id="vertexcity_code"><a class="header" href="#vertexcity_code"><code>vertex.city_code</code></a></h4>
<p>Required: False<br />
Default: n/a<br />
Type: String</p>
<p>A code for the city in which the node represented by this vertex is located. This code can be used to control the placement of hosts in the network: when attaching a specific host into the network, we ignore any vertex whose <code>city_code</code> does not match the host's <a href="shadow_config.html#host_defaultscity_code_hint"><code>city_code_hint</code> host configuration value</a> (if one is configured).</p>
<h4 id="vertexip_address"><a class="header" href="#vertexip_address"><code>vertex.ip_address</code></a></h4>
<p>Required: False<br />
Default: n/a
Type: String</p>
<p>An IP address at which the node represented by this vertex is located. This address can be used to control the placement of hosts in the network: after filtering vertices based on the city and country codes (as described above), we perform a <a href="https://en.wikipedia.org/wiki/Longest_prefix_match">longest prefix match</a> on the remaining vertices by comparing the vertex <code>ip_address</code> with the host's <a href="shadow_config.html#host_defaultsip_address_hint"><code>ip_address_hint</code> host configuration value</a> (if one is configured) and attach the host to the vertex with the closest match. We assign the host the address specified in <code>ip_address_hint</code> as long as that address has not yet been assigned to another host, otherwise we choose a unique address nearby to the requested address.</p>
<h4 id="vertexbandwidth_down"><a class="header" href="#vertexbandwidth_down"><code>vertex.bandwidth_down</code></a></h4>
<p>Required: True<br />
Type: String</p>
<p>A string defining the downstream (receive) bandwidth that will be allowed for any host attached to this vertex. Hosts may individually override this value in <a href="shadow_config.html#hostshostnamebandwidth_down">the Shadow config file</a>. The format of the string specifies the bandwidth and its unit as described in the <a href="shadow_config.html">config documentation</a>, e.g., <code>10 Mbit</code>. Note that this bandwidth is allowed for every host that is attached to this vertex; it is <strong>not</strong> the total bandwidth logically available at the node (which is not defined).</p>
<h4 id="vertexbandwidth_up"><a class="header" href="#vertexbandwidth_up"><code>vertex.bandwidth_up</code></a></h4>
<p>Required: True<br />
Type: String</p>
<p>A string defining the upstream (send) bandwidth that will be allowed for any host attached to this vertex. Hosts may individually override this value in <a href="shadow_config.html#hostshostnamebandwidth_up">the Shadow config file</a>. The format of the string specifies the bandwidth and its unit as described in the <a href="shadow_config.html">config documentation</a>, e.g., <code>10 Mbit</code>. Note that this bandwidth is allowed for every host that is attached to this vertex; it is <strong>not</strong> the total bandwidth logically available at the node (which is not defined).</p>
<h4 id="edgesource"><a class="header" href="#edgesource"><code>edge.source</code></a></h4>
<p>Required: True<br />
Type: Integer</p>
<p>The unique integer identifier of the first of two vertices of the edge. The vertex must exist in the graph. If the graph is directed, this vertex is treated as the source or start of the edge.</p>
<h4 id="edgetarget"><a class="header" href="#edgetarget"><code>edge.target</code></a></h4>
<p>Required: True<br />
Type: Integer</p>
<p>The unique integer identifier of the second of two vertices of the edge. The vertex must exist in the graph. If the graph is directed, this vertex is treated as the target or end of the edge.</p>
<h4 id="edgelabel"><a class="header" href="#edgelabel"><code>edge.label</code></a></h4>
<p>Required: False<br />
Default: n/a<br />
Type: String</p>
<p>An optional, human-meaningful string description of the edge. The string may be used in log messages printed by Shadow.</p>
<h4 id="edgelatency"><a class="header" href="#edgelatency"><code>edge.latency</code></a></h4>
<p>Required: True<br />
Type: Float</p>
<p>The latency that will be added to packets traversing this edge. This value is used as a weight while running Dijkstra's shortest path algorithm.</p>
<h4 id="edgejitter"><a class="header" href="#edgejitter"><code>edge.jitter</code></a></h4>
<p>Required: False<br />
Default: n/a<br />
Type: Float</p>
<p>This keyword is allowed but currently nonfunctional; it is reserved for future use.</p>
<h4 id="edgepacket_loss"><a class="header" href="#edgepacket_loss"><code>edge.packet_loss</code></a></h4>
<p>Required: True<br />
Type: Float</p>
<p>A fractional value between 0 and 1 representing the chance that a packet traversing this edge will get dropped.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../shadow/network_config.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../shadow/developer_guide.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="../shadow/network_config.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="../shadow/developer_guide.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
